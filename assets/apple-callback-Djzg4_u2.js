import{a as p,u as f,r as i,j as g,b as d,U as n,s as u,g as k}from"./index-C8JFuZlv.js";function v(){const t=p(),{toast:a}=f(),l=i.useRef(!1);return i.useEffect(()=>{if(l.current)return;l.current=!0,(async()=>{try{const e=new URLSearchParams(window.location.search),r=e.get("access_token"),s=e.get("refresh_token"),c=e.get("error"),o=e.get("message");if(console.log("애플 콜백 파라미터:",{accessToken:r?r.substring(0,20)+"...":null,refreshToken:s?s.substring(0,20)+"...":null,error:c,errorMessage:o}),c){console.error("애플 로그인 에러:",c,o),a({title:"애플 로그인 실패",description:o?decodeURIComponent(o):"로그인 중 오류가 발생했습니다.",variant:"destructive"}),t(n.ROOT,{replace:!0});return}r&&s?(u("accessToken",r),u("refreshToken",s),await k(),a({title:"선생님, 어서오세요!"}),t(n.HOME,{replace:!0})):(console.error("애플 콜백 파라미터 누락:",{accessToken:r,refreshToken:s}),a({title:"애플 로그인 실패",description:"인증 정보를 받을 수 없습니다.",variant:"destructive"}),t(n.ROOT,{replace:!0}))}catch(e){console.error("애플 로그인 처리 중 오류:",e),a({title:"애플 로그인 실패",description:"로그인 처리 중 오류가 발생했습니다.",variant:"destructive"}),t(n.ROOT,{replace:!0})}})()},[]),g.jsx(d,{})}export{v as default};
