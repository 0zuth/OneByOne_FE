import{h as se,j as e,r as h,i as re,P as ae,k as w,l as oe,m as D,n as T,o as B,L,a as ne,U as A}from"./index-C8JFuZlv.js";import{B as G,P as ie}from"./index-DR008vrG.js";import{A as ce}from"./AuthTextLinks-B3NI-GTh.js";import{u as le,a as de,E as me,b as ue,c as pe}from"./useStepRenderer-Bersr0Eu.js";import{s as q,o as he,b as O,e as fe,a as xe}from"./types-CfV6Q2Fg.js";import{u as z,F as K,a as U,b as v,c as y,d as H,e as S,C as M}from"./index-D7zi7Ntn.js";import{T as V}from"./index-bnacA-L2.js";import{p as be}from"./validationSchemas-CFCrOTP5.js";import{N as ge,R as Ce}from"./RoleField-DXy1EF73.js";import{u as je,a as ke}from"./index-CiHMAOVr.js";import{a as ve}from"./useAuth-C0xK3gWt.js";import"./useMetadata-D7nd75QV.js";import"./useMutation-B4GGscfX.js";import"./index-DFQufHV3.js";import"./index-bz4f2k9Y.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Se=se("Check",ye);function Ne({onNext:s,isLoading:o=!1}){const t=z({resolver:q(be),defaultValues:{password:"",confirmPassword:""},mode:"onChange"}),a=n=>{s(n)};return e.jsx(K,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(a),className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3.5",children:[e.jsx(U,{control:t.control,name:"password",render:({field:n,fieldState:r})=>e.jsxs(v,{children:[e.jsx(y,{children:"비밀번호"}),e.jsx(H,{children:e.jsx(V,{placeholder:"비밀번호를 입력해주세요.",error:!!r.error,...n})}),e.jsx(S,{})]})}),e.jsx(U,{control:t.control,name:"confirmPassword",render:({field:n,fieldState:r})=>e.jsxs(v,{children:[e.jsx(y,{children:"비밀번호 확인"}),e.jsx(H,{children:e.jsx(V,{placeholder:"비밀번호를 다시 한번 입력해주세요.",error:!!r.error,...n})}),e.jsx(S,{})]})})]}),e.jsx(G,{variant:"secondary",type:"submit",size:"lg",font:"md",disabled:!t.formState.isValid||o,children:"확인"})]})})}var N="Checkbox",[Pe,$e]=re(N),[Ee,I]=Pe(N);function Re(s){const{__scopeCheckbox:o,checked:t,children:a,defaultChecked:n,disabled:r,form:c,name:l,onCheckedChange:i,required:b,value:g="on",internal_do_not_use_render:u}=s,[f,x]=oe({prop:t,defaultProp:n??!1,onChange:i,caller:N}),[C,d]=h.useState(null),[k,m]=h.useState(null),p=h.useRef(!1),P=C?!!c||!!C.closest("form"):!0,E={checked:f,disabled:r,setChecked:x,control:C,setControl:d,name:l,form:c,value:g,hasConsumerStoppedPropagationRef:p,required:b,defaultChecked:j(n)?!1:n,isFormControl:P,bubbleInput:k,setBubbleInput:m};return e.jsx(Ee,{scope:o,...E,children:we(u)?u(E):a})}var X="CheckboxTrigger",W=h.forwardRef(({__scopeCheckbox:s,onKeyDown:o,onClick:t,...a},n)=>{const{control:r,value:c,disabled:l,checked:i,required:b,setControl:g,setChecked:u,hasConsumerStoppedPropagationRef:f,isFormControl:x,bubbleInput:C}=I(X,s),d=D(n,g),k=h.useRef(i);return h.useEffect(()=>{const m=r==null?void 0:r.form;if(m){const p=()=>u(k.current);return m.addEventListener("reset",p),()=>m.removeEventListener("reset",p)}},[r,u]),e.jsx(w.button,{type:"button",role:"checkbox","aria-checked":j(i)?"mixed":i,"aria-required":b,"data-state":Z(i),"data-disabled":l?"":void 0,disabled:l,value:c,...a,ref:d,onKeyDown:T(o,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:T(t,m=>{u(p=>j(p)?!0:!p),C&&x&&(f.current=m.isPropagationStopped(),f.current||m.stopPropagation())})})});W.displayName=X;var _=h.forwardRef((s,o)=>{const{__scopeCheckbox:t,name:a,checked:n,defaultChecked:r,required:c,disabled:l,value:i,onCheckedChange:b,form:g,...u}=s;return e.jsx(Re,{__scopeCheckbox:t,checked:n,defaultChecked:r,disabled:l,required:c,onCheckedChange:b,name:a,form:g,value:i,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(W,{...u,ref:o,__scopeCheckbox:t}),f&&e.jsx(Y,{__scopeCheckbox:t})]})})});_.displayName=N;var $="CheckboxIndicator",J=h.forwardRef((s,o)=>{const{__scopeCheckbox:t,forceMount:a,...n}=s,r=I($,t);return e.jsx(ae,{present:a||j(r.checked)||r.checked===!0,children:e.jsx(w.span,{"data-state":Z(r.checked),"data-disabled":r.disabled?"":void 0,...n,ref:o,style:{pointerEvents:"none",...s.style}})})});J.displayName=$;var Q="CheckboxBubbleInput",Y=h.forwardRef(({__scopeCheckbox:s,...o},t)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:r,defaultChecked:c,required:l,disabled:i,name:b,value:g,form:u,bubbleInput:f,setBubbleInput:x}=I(Q,s),C=D(t,x),d=je(r),k=ke(a);h.useEffect(()=>{const p=f;if(!p)return;const P=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(P,"checked").set,ee=!n.current;if(d!==r&&F){const te=new Event("click",{bubbles:ee});p.indeterminate=j(r),F.call(p,j(r)?!1:r),p.dispatchEvent(te)}},[f,d,r,n]);const m=h.useRef(j(r)?!1:r);return e.jsx(w.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??m.current,required:l,disabled:i,name:b,value:g,form:u,...o,tabIndex:-1,ref:C,style:{...o.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Y.displayName=Q;function we(s){return typeof s=="function"}function j(s){return s==="indeterminate"}function Z(s){return j(s)?"indeterminate":s?"checked":"unchecked"}function R({className:s,ref:o,...t}){return e.jsx(_,{ref:o,className:B("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(J,{className:B("flex items-center justify-center text-current"),children:e.jsx(Se,{className:"h-4 w-4"})})})}R.displayName=_.displayName;function Ie({control:s,errors:o}){return e.jsxs("section",{className:"space-y-2",children:[e.jsx(M,{name:"termsOfService",control:s,render:({field:t})=>{var a;return e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{id:"terms-of-service",checked:t.value,onCheckedChange:t.onChange}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs(y,{htmlFor:"terms-of-service",className:"text-sm font-normal leading-5",children:[e.jsx("span",{className:"mr-2 text-tertiary-3",children:"[필수]"}),"서비스 이용약관 동의"]}),e.jsx(L,{to:"https://abounding-leather-799.notion.site/229a1b804ebf800e9315d90ad4b190ca",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-normal03 underline hover:opacity-70",children:"보기"})]})]}),e.jsx(S,{children:(a=o==null?void 0:o.termsOfService)==null?void 0:a.message})]})}}),e.jsx(M,{name:"privacyPolicy",control:s,render:({field:t})=>{var a;return e.jsxs(v,{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R,{id:"privacy-policy",checked:t.value,onCheckedChange:t.onChange}),e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs(y,{htmlFor:"privacy-policy",className:"text-sm font-normal leading-5",children:[e.jsx("span",{className:"mr-2 text-tertiary-3",children:"[필수]"}),"개인정보 수집 및 이용 동의"]}),e.jsx(L,{to:"https://abounding-leather-799.notion.site/229a1b804ebf8008b748e404bffa1aa8",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary-normal03 underline hover:text-primary",children:"보기"})]})]}),e.jsx(S,{children:(a=o==null?void 0:o.privacyPolicy)==null?void 0:a.message})]})}})]})}const _e=he({nickname:xe().min(2,"닉네임은 최소 2자 이상이어야 합니다.").max(10,"닉네임은 최대 10자까지 가능합니다."),role:fe(["TEACHER","PROSPECTIVE_TEACHER"],{errorMap:()=>({message:"회원 유형을 선택해주세요."})}),termsOfService:O().refine(s=>s===!0,{message:"서비스 이용약관에 동의해주세요."}),privacyPolicy:O().refine(s=>s===!0,{message:"개인정보 수집 및 이용에 동의해주세요."})});function Fe({onSubmit:s,isLoading:o}){var l;const t=z({resolver:q(_e),defaultValues:{nickname:"",role:"TEACHER",termsOfService:!1,privacyPolicy:!1},mode:"onChange"}),[a,n]=h.useState("TEACHER"),r=i=>{n(i),t.setValue("role",i,{shouldValidate:!0})},c=t.handleSubmit(i=>{s({...i,role:a})});return e.jsx(K,{...t,children:e.jsxs("form",{onSubmit:c,className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-7",children:[e.jsx(ge,{control:t.control,name:"nickname",setValue:t.setValue}),e.jsx(Ce,{selectedRole:a,onRoleChange:r,error:(l=t.formState.errors.role)==null?void 0:l.message}),e.jsx(Ie,{control:t.control,errors:t.formState.errors})]}),e.jsx(G,{variant:"secondary",type:"submit",size:"lg",font:"md",disabled:o||!t.formState.isValid,children:"시작하기"})]})})}const Te={1:{title:"이메일로 가입",showSignInLink:!0},2:{title:"이메일 인증",getSubtitle:s=>e.jsxs("p",{className:"mt-2 text-sm text-primary-normal03",children:["인증번호가 ",e.jsx("strong",{children:s.email}),"로 ",e.jsx("br",{}),"발송되었습니다. 메일함을 확인해주세요."]})},3:{title:"비밀번호 설정"},4:{title:e.jsxs(e.Fragment,{children:["반가워요! ",e.jsx("br",{})," 선생님에 대해 알려주세요!"]})}};function Je(){const s=ne(),{mutate:o,isPending:t}=ve(),{currentStep:a,goToPreviousStep:n,goToNextStep:r}=le({initStep:1,maxStep:4}),{formData:c,updateFormData:l}=de({}),{getStepTitle:i,getStepSubtitle:b,shouldShowSignInLink:g,renderStep:u}=ue({stepConfigs:Te}),f=()=>{a===1?s(A.ROOT):n()},x={1:d=>{l({email:d.email}),r()},2:()=>r(),3:d=>{l({password:d.password}),r()},4:d=>{const k={email:c.email,password:c.password,provider:"LOCAL",providerId:0,nickname:d.nickname,role:d.role,profileImageUrl:""};o(k)}},C={1:e.jsx(pe,{onNext:x[1]}),2:e.jsx(me,{email:c.email,onNext:x[2]}),3:e.jsx(Ne,{onNext:x[3]}),4:e.jsx(Fe,{onSubmit:x[4],isLoading:t})};return e.jsxs(ie,{title:"원바원 | 회원가입",currentPath:A.SIGNUP,headerTitle:" ",headerHasBorder:!1,isGlobalNavBar:!1,mainClassName:"my-auto flex flex-col gap-16",wrapperBg:"white",hasBackButton:!0,onBackButtonClick:f,children:[e.jsxs("section",{className:"text-center text-lg",children:[e.jsx("h1",{children:i(a,c)}),b(a,c)]}),e.jsx("section",{className:"flex flex-col gap-9 px-5",children:u(a,C)}),g(a)&&e.jsx(ce,{types:["로그인"]})]})}export{Je as default};
