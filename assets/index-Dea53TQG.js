import{r as b,j as a,o as v,S as x,B as g,a as N,A as j,U as k,d as C}from"./index-C8JFuZlv.js";import{g as V,h as A}from"./useCommunity-BolemDNT.js";const E=g("relative inline-block",{variants:{fullWidth:{true:"w-full",false:""}},defaultVariants:{fullWidth:!1}}),O=g("absolute z-50 bg-white border border-primary-normal02 shadow-md rounded-lg overflow-hidden min-w-[120px]",{variants:{isOpen:{true:"block",false:"hidden"},position:{top:"bottom-full mb-1",bottom:"top-full mt-1",left:"right-full mr-1",right:"left-full ml-1"},align:{start:"",center:"",end:""},width:{auto:"",full:"w-full"}},compoundVariants:[{position:"top",align:"start",className:"left-0"},{position:"top",align:"center",className:"left-1/2 -translate-x-1/2"},{position:"top",align:"end",className:"right-0"},{position:"bottom",align:"start",className:"left-0"},{position:"bottom",align:"center",className:"left-1/2 -translate-x-1/2"},{position:"bottom",align:"end",className:"right-0"}],defaultVariants:{position:"bottom",align:"start",width:"auto"}}),P=g("p-2.5 text-md text-primary-dark01 cursor-pointer border-b border-primary-normal02 flex justify-center items-center gap-2",{variants:{variant:{default:"hover:bg-secondary-light03",destructive:"text-red-600 hover:bg-red-50"}},defaultVariants:{variant:"default"}}),R=({options:s,position:o,align:c,width:l,fullWidth:e,trigger:d,className:i,menuClassName:u,closeOnClick:f=!0,closeOnOutsideClick:m=!0})=>{const[r,n]=b.useState(!1),p=b.useRef(null),w=()=>{n(t=>!t)};return b.useEffect(()=>{if(!m)return;const t=h=>{p.current&&!p.current.contains(h.target)&&n(!1)};return r&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[r,m]),a.jsxs("div",{ref:p,className:v(E({fullWidth:e}),i),children:[d?a.jsx("div",{onClick:w,className:"cursor-pointer",children:d}):a.jsx("button",{onClick:w,"aria-label":"드롭다운 열기",className:"p-1",children:a.jsx("img",{src:x.KEBAB,alt:"메뉴",className:"h-5 w-5"})}),a.jsx("div",{className:v(O({isOpen:r,position:o,align:c,width:l}),u),children:s.map((t,h)=>a.jsxs("div",{className:v(P({variant:t.variant}),t.disabled&&"cursor-not-allowed opacity-50"),onClick:()=>{t.disabled||(t.onClick(),f&&n(!1))},children:[t.icon&&a.jsx("span",{className:"dropdown-item-icon",children:t.icon}),a.jsx("span",{children:t.label})]},h))})]})};function L({targetId:s,targetType:o,authorNickname:c,postId:l,onDeleteSuccess:e}){const d=N(),i=j(C),u=V(),f=A(),m=(i==null?void 0:i.nickname)===c,r=()=>{o==="POST"?u.mutate(s,{onSuccess:()=>{e==null||e()}}):o==="COMMENT"&&l&&f.mutate({commentId:s,postId:l},{onSuccess:()=>{e==null||e()}})},n=[{label:"신고하기",onClick:()=>d(`${k.REPORT}?targetId=${s}&type=${o}`)}];return m&&n.unshift({label:"삭제하기",onClick:r}),a.jsx(R,{options:n,position:"bottom",align:"end"})}export{L as A};
