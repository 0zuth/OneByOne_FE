import{r as a,ag as he,af as Ie,i as j,ah as Ee,j as n,k as S,n as x,m as C,l as K,ai as xe,P as ye,o as V,C as M,D as L,a as we,y as Se,u as Te,U as Ce}from"./index-C8JFuZlv.js";import{P as Ne,B}from"./index-DR008vrG.js";import{u as Pe,a as Ae}from"./index-CiHMAOVr.js";import"./useMetadata-D7nd75QV.js";import"./useMutation-B4GGscfX.js";var _e=he[" useId ".trim().toString()]||(()=>{}),Fe=0;function Oe(e){const[r,t]=a.useState(_e());return Ie(()=>{t(o=>o??String(Fe++))},[e]),r?`radix-${r}`:""}var je=a.createContext(void 0);function H(e){const r=a.useContext(je);return e||r||"ltr"}var F="rovingFocusGroup.onEntryFocus",ke={bubbles:!1,cancelable:!0},T="RovingFocusGroup",[O,q,Ge]=Ee(T),[De,Y]=j(T,[Ge]),[Me,Le]=De(T),$=a.forwardRef((e,r)=>n.jsx(O.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(O.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Be,{...e,ref:r})})}));$.displayName=T;var Be=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:t,orientation:o,loop:c=!1,dir:s,currentTabStopId:f,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:g,onEntryFocus:m,preventScrollOnEntryFocus:l=!1,...p}=e,v=a.useRef(null),d=C(r,v),R=H(s),[i,u]=K({prop:f,defaultProp:b??null,onChange:g,caller:T}),[E,P]=a.useState(!1),I=xe(m),y=q(t),A=a.useRef(!1),[me,G]=a.useState(0);return a.useEffect(()=>{const h=v.current;if(h)return h.addEventListener(F,I),()=>h.removeEventListener(F,I)},[I]),n.jsx(Me,{scope:t,orientation:o,dir:R,loop:c,currentTabStopId:i,onItemFocus:a.useCallback(h=>u(h),[u]),onItemShiftTab:a.useCallback(()=>P(!0),[]),onFocusableItemAdd:a.useCallback(()=>G(h=>h+1),[]),onFocusableItemRemove:a.useCallback(()=>G(h=>h-1),[]),children:n.jsx(S.div,{tabIndex:E||me===0?-1:0,"data-orientation":o,...p,ref:d,style:{outline:"none",...e.style},onMouseDown:x(e.onMouseDown,()=>{A.current=!0}),onFocus:x(e.onFocus,h=>{const ve=!A.current;if(h.target===h.currentTarget&&ve&&!E){const D=new CustomEvent(F,ke);if(h.currentTarget.dispatchEvent(D),!D.defaultPrevented){const _=y().filter(w=>w.focusable),Re=_.find(w=>w.active),be=_.find(w=>w.id===i),ge=[Re,be,..._].filter(Boolean).map(w=>w.ref.current);X(ge,l)}}A.current=!1}),onBlur:x(e.onBlur,()=>P(!1))})})}),z="RovingFocusGroupItem",W=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:t,focusable:o=!0,active:c=!1,tabStopId:s,children:f,...b}=e,g=Oe(),m=s||g,l=Le(z,t),p=l.currentTabStopId===m,v=q(t),{onFocusableItemAdd:d,onFocusableItemRemove:R,currentTabStopId:i}=l;return a.useEffect(()=>{if(o)return d(),()=>R()},[o,d,R]),n.jsx(O.ItemSlot,{scope:t,id:m,focusable:o,active:c,children:n.jsx(S.span,{tabIndex:p?0:-1,"data-orientation":l.orientation,...b,ref:r,onMouseDown:x(e.onMouseDown,u=>{o?l.onItemFocus(m):u.preventDefault()}),onFocus:x(e.onFocus,()=>l.onItemFocus(m)),onKeyDown:x(e.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){l.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const E=Ve(u,l.orientation,l.dir);if(E!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let I=v().filter(y=>y.focusable).map(y=>y.ref.current);if(E==="last")I.reverse();else if(E==="prev"||E==="next"){E==="prev"&&I.reverse();const y=I.indexOf(u.currentTarget);I=l.loop?He(I,y+1):I.slice(y+1)}setTimeout(()=>X(I))}}),children:typeof f=="function"?f({isCurrentTabStop:p,hasTabStop:i!=null}):f})})});W.displayName=z;var Ue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ke(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ve(e,r,t){const o=Ke(e.key,t);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ue[o]}function X(e,r=!1){const t=document.activeElement;for(const o of e)if(o===t||(o.focus({preventScroll:r}),document.activeElement!==t))return}function He(e,r){return e.map((t,o)=>e[(r+o)%e.length])}var qe=$,Ye=W,k="Radio",[$e,J]=j(k),[ze,We]=$e(k),Q=a.forwardRef((e,r)=>{const{__scopeRadio:t,name:o,checked:c=!1,required:s,disabled:f,value:b="on",onCheck:g,form:m,...l}=e,[p,v]=a.useState(null),d=C(r,u=>v(u)),R=a.useRef(!1),i=p?m||!!p.closest("form"):!0;return n.jsxs(ze,{scope:t,checked:c,disabled:f,children:[n.jsx(S.button,{type:"button",role:"radio","aria-checked":c,"data-state":re(c),"data-disabled":f?"":void 0,disabled:f,value:b,...l,ref:d,onClick:x(e.onClick,u=>{c||g==null||g(),i&&(R.current=u.isPropagationStopped(),R.current||u.stopPropagation())})}),i&&n.jsx(te,{control:p,bubbles:!R.current,name:o,value:b,checked:c,required:s,disabled:f,form:m,style:{transform:"translateX(-100%)"}})]})});Q.displayName=k;var Z="RadioIndicator",ee=a.forwardRef((e,r)=>{const{__scopeRadio:t,forceMount:o,...c}=e,s=We(Z,t);return n.jsx(ye,{present:o||s.checked,children:n.jsx(S.span,{"data-state":re(s.checked),"data-disabled":s.disabled?"":void 0,...c,ref:r})})});ee.displayName=Z;var Xe="RadioBubbleInput",te=a.forwardRef(({__scopeRadio:e,control:r,checked:t,bubbles:o=!0,...c},s)=>{const f=a.useRef(null),b=C(f,s),g=Pe(t),m=Ae(r);return a.useEffect(()=>{const l=f.current;if(!l)return;const p=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(p,"checked").set;if(g!==t&&d){const R=new Event("click",{bubbles:o});d.call(l,t),l.dispatchEvent(R)}},[g,t,o]),n.jsx(S.input,{type:"radio","aria-hidden":!0,defaultChecked:t,...c,tabIndex:-1,ref:b,style:{...c.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});te.displayName=Xe;function re(e){return e?"checked":"unchecked"}var Je=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N="RadioGroup",[Qe,dt]=j(N,[Y,J]),oe=Y(),ae=J(),[Ze,et]=Qe(N),ne=a.forwardRef((e,r)=>{const{__scopeRadioGroup:t,name:o,defaultValue:c,value:s,required:f=!1,disabled:b=!1,orientation:g,dir:m,loop:l=!0,onValueChange:p,...v}=e,d=oe(t),R=H(m),[i,u]=K({prop:s,defaultProp:c??null,onChange:p,caller:N});return n.jsx(Ze,{scope:t,name:o,required:f,disabled:b,value:i,onValueChange:u,children:n.jsx(qe,{asChild:!0,...d,orientation:g,dir:R,loop:l,children:n.jsx(S.div,{role:"radiogroup","aria-required":f,"aria-orientation":g,"data-disabled":b?"":void 0,dir:R,...v,ref:r})})})});ne.displayName=N;var se="RadioGroupItem",ce=a.forwardRef((e,r)=>{const{__scopeRadioGroup:t,disabled:o,...c}=e,s=et(se,t),f=s.disabled||o,b=oe(t),g=ae(t),m=a.useRef(null),l=C(r,m),p=s.value===c.value,v=a.useRef(!1);return a.useEffect(()=>{const d=i=>{Je.includes(i.key)&&(v.current=!0)},R=()=>v.current=!1;return document.addEventListener("keydown",d),document.addEventListener("keyup",R),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",R)}},[]),n.jsx(Ye,{asChild:!0,...b,focusable:!f,active:p,children:n.jsx(Q,{disabled:f,required:s.required,checked:p,...g,...c,name:s.name,ref:l,onCheck:()=>s.onValueChange(c.value),onKeyDown:x(d=>{d.key==="Enter"&&d.preventDefault()}),onFocus:x(c.onFocus,()=>{var d;v.current&&((d=m.current)==null||d.click())})})})});ce.displayName=se;var tt="RadioGroupIndicator",ie=a.forwardRef((e,r)=>{const{__scopeRadioGroup:t,...o}=e,c=ae(t);return n.jsx(ee,{...c,...o,ref:r})});ie.displayName=tt;var ue=ne,le=ce,rt=ie;const de=a.forwardRef(({className:e,...r},t)=>n.jsx(ue,{className:V("grid gap-2",e),...r,ref:t}));de.displayName=ue.displayName;const fe=a.forwardRef(({className:e,...r},t)=>n.jsx(le,{ref:t,className:V("aspect-square h-4 w-4 rounded-full border border-primary-normal02 bg-primary-foreground text-primary focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:border-tertiary-3 data-[state=checked]:bg-white data-[state=checked]:text-tertiary-3",e),...r,children:n.jsx(rt,{className:"flex items-center justify-center",children:n.jsx("div",{className:"aspect-square h-2.5 w-2.5 rounded-full bg-tertiary-3"})})}));fe.displayName=le.displayName;const ot={createReport:async e=>await M({method:"POST",path:L.REPORT.BASE,data:e,withAuth:!0,withCredentials:!0}),getMyReports:async()=>await M({method:"GET",path:L.REPORT.MY_REPORT,withAuth:!0,withCredentials:!0})},U=[{value:"INAPPROPRIATE_LANGUAGE",label:"부적절한 언어 또는 폭언이 포함되어 있어요."},{value:"COMMERCIAL",label:"상업적인 광고 또는 홍보성 정보예요."},{value:"FALSE_INFORMATION",label:"허위 정보 또는 명예훼손이 의심돼요."},{value:"PERSONAL_INFORMATION",label:"민감한 개인정보가 포함되어 있어요."},{value:"INAPPROPRIATE_CONTENT",label:"불건전한 내용(음란성)이 포함되어 있어요."},{value:"OTHER",label:"기타"}],pe={POST:"게시글을",COMMENT:"댓글을",REVIEW:"리뷰를",USER:"사용자를"},at=e=>e!==null&&Object.keys(pe).includes(e);function ft(){const e=we(),[r]=Se(),{toast:t}=Te(),o=r.get("targetId"),c=r.get("type"),[s,f]=a.useState(""),[b,g]=a.useState(""),[m,l]=a.useState(!1),p=o?Number(o):null,v=at(c)?c:null,d=()=>{e(-1)},R=async()=>{if(!p||!v||!s||Number.isNaN(p)){t({title:"신고 처리 중 오류가 발생했습니다",variant:"destructive"});return}try{l(!0);const i=U.find(E=>E.value===s),u={targetId:p,targetType:v,reason:s==="OTHER"?b:(i==null?void 0:i.label)||""};await ot.createReport(u),t({title:"신고가 접수되었습니다"}),e(-1)}catch(i){t({title:"신고 처리 중 오류가 발생했습니다",variant:"destructive"}),console.error("신고 처리 실패:",i)}finally{l(!1)}};return!p||!v||Number.isNaN(p)?(t({title:"잘못된 접근입니다",variant:"destructive"}),e(-1),null):n.jsxs(Ne,{title:"신고하기",description:"신고하기",headerTitle:"신고하기",wrapperBg:"white",currentPath:Ce.REPORT,isGlobalNavBar:!1,onBackButtonClick:d,mainClassName:"flex flex-col gap-8 py-8 px-5 mt-14 mb-24",children:[n.jsx("h2",{className:"text-center font-semibold",children:v&&`${pe[v]} 신고하시겠어요?`}),n.jsx(de,{value:s,onValueChange:f,children:U.map(i=>n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(fe,{value:i.value,id:i.value}),n.jsx("label",{htmlFor:i.value,className:"flex-1 cursor-pointer text-sm text-primary-dark01",children:i.label})]},i.value))}),s==="OTHER"&&n.jsx("textarea",{value:b,onChange:i=>g(i.target.value),className:"h-32 w-full rounded-lg border p-3 text-sm",placeholder:"신고 사유를 자세히 설명해주세요."}),n.jsxs("div",{className:"flex flex-1 gap-3",children:[n.jsx(B,{font:"sm_sb",onClick:d,className:"w-full",disabled:m,children:"취소"}),n.jsx(B,{size:"lg",font:"sm_sb",variant:"primary",className:"w-full",disabled:m||!s||s==="OTHER"&&!b,onClick:R,children:m?"처리중...":"확인"})]})]})}export{ft as default};
