var _t=t=>{throw TypeError(t)};var st=(t,e,r)=>e.has(t)||_t("Cannot "+r);var a=(t,e,r)=>(st(t,e,"read from private field"),r?r.call(t):e.get(t)),S=(t,e,r)=>e.has(t)?_t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),y=(t,e,r,s)=>(st(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),p=(t,e,r)=>(st(t,e,"access private method"),r);import{_ as Zt,$ as At,a0 as _,a1 as nt,a2 as k,a3 as it,a4 as ot,a5 as vt,a6 as te,a7 as ee,a8 as re,a9 as wt,aa as Dt,r as g,ab as se,x as $,C as z,D as J,E as ct,j as f,L as Ht,o as Qt,U as v,S as ut,a as ae,v as Bt,I as ne,B as jt,ac as ie}from"./index-C8JFuZlv.js";import{u as Kt}from"./useMutation-B4GGscfX.js";var E,u,F,O,P,Q,N,U,V,B,j,L,x,M,K,l,Y,ht,lt,ft,dt,mt,yt,pt,kt,xt,Yt=(xt=class extends Zt{constructor(e,r){super();S(this,l);S(this,E);S(this,u);S(this,F);S(this,O);S(this,P);S(this,Q);S(this,N);S(this,U);S(this,V);S(this,B);S(this,j);S(this,L);S(this,x);S(this,M);S(this,K,new Set);this.options=r,y(this,E,e),y(this,U,null),y(this,N,At()),this.options.experimental_prefetchInRender||a(this,N).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,u).addObserver(this),Nt(a(this,u),this.options)?p(this,l,Y).call(this):this.updateResult(),p(this,l,dt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return gt(a(this,u),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return gt(a(this,u),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,l,mt).call(this),p(this,l,yt).call(this),a(this,u).removeObserver(this)}setOptions(e){const r=this.options,s=a(this,u);if(this.options=a(this,E).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof _(this.options.enabled,a(this,u))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,l,pt).call(this),a(this,u).setOptions(this.options),r._defaulted&&!nt(this.options,r)&&a(this,E).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,u),observer:this});const o=this.hasListeners();o&&Ut(a(this,u),s,this.options,r)&&p(this,l,Y).call(this),this.updateResult(),o&&(a(this,u)!==s||_(this.options.enabled,a(this,u))!==_(r.enabled,a(this,u))||k(this.options.staleTime,a(this,u))!==k(r.staleTime,a(this,u)))&&p(this,l,ht).call(this);const c=p(this,l,lt).call(this);o&&(a(this,u)!==s||_(this.options.enabled,a(this,u))!==_(r.enabled,a(this,u))||c!==a(this,M))&&p(this,l,ft).call(this,c)}getOptimisticResult(e){const r=a(this,E).getQueryCache().build(a(this,E),e),s=this.createResult(r,e);return ce(this,s)&&(y(this,O,s),y(this,Q,this.options),y(this,P,a(this,u).state)),s}getCurrentResult(){return a(this,O)}trackResult(e,r){return new Proxy(e,{get:(s,o)=>(this.trackProp(o),r==null||r(o),Reflect.get(s,o))})}trackProp(e){a(this,K).add(e)}getCurrentQuery(){return a(this,u)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=a(this,E).defaultQueryOptions(e),s=a(this,E).getQueryCache().build(a(this,E),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(e){return p(this,l,Y).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,O)))}createResult(e,r){var bt;const s=a(this,u),o=this.options,c=a(this,O),n=a(this,P),R=a(this,Q),C=e!==s?e.state:a(this,F),{state:h}=e;let i={...h},b=!1,m;if(r._optimisticResults){const I=this.hasListeners(),q=!I&&Nt(e,r),H=I&&Ut(e,s,r,o);(q||H)&&(i={...i,...re(h.data,e.options)}),r._optimisticResults==="isRestoring"&&(i.fetchStatus="idle")}let{error:w,errorUpdatedAt:D,status:T}=i;m=i.data;let W=!1;if(r.placeholderData!==void 0&&m===void 0&&T==="pending"){let I;c!=null&&c.isPlaceholderData&&r.placeholderData===(R==null?void 0:R.placeholderData)?(I=c.data,W=!0):I=typeof r.placeholderData=="function"?r.placeholderData((bt=a(this,j))==null?void 0:bt.state.data,a(this,j)):r.placeholderData,I!==void 0&&(T="success",m=wt(c==null?void 0:c.data,I,r),b=!0)}if(r.select&&m!==void 0&&!W)if(c&&m===(n==null?void 0:n.data)&&r.select===a(this,V))m=a(this,B);else try{y(this,V,r.select),m=r.select(m),m=wt(c==null?void 0:c.data,m,r),y(this,B,m),y(this,U,null)}catch(I){y(this,U,I)}a(this,U)&&(w=a(this,U),m=a(this,B),D=Date.now(),T="error");const tt=i.fetchStatus==="fetching",et=T==="pending",rt=T==="error",Tt=et&&tt,It=m!==void 0,A={status:T,fetchStatus:i.fetchStatus,isPending:et,isSuccess:T==="success",isError:rt,isInitialLoading:Tt,isLoading:Tt,data:m,dataUpdatedAt:i.dataUpdatedAt,error:w,errorUpdatedAt:D,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>C.dataUpdateCount||i.errorUpdateCount>C.errorUpdateCount,isFetching:tt,isRefetching:tt&&!et,isLoadingError:rt&&!It,isPaused:i.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:rt&&It,isStale:Ct(e,r),refetch:this.refetch,promise:a(this,N),isEnabled:_(r.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=G=>{A.status==="error"?G.reject(A.error):A.data!==void 0&&G.resolve(A.data)},q=()=>{const G=y(this,N,A.promise=At());I(G)},H=a(this,N);switch(H.status){case"pending":e.queryHash===s.queryHash&&I(H);break;case"fulfilled":(A.status==="error"||A.data!==H.value)&&q();break;case"rejected":(A.status!=="error"||A.error!==H.reason)&&q();break}}return A}updateResult(){const e=a(this,O),r=this.createResult(a(this,u),this.options);if(y(this,P,a(this,u).state),y(this,Q,this.options),a(this,P).data!==void 0&&y(this,j,a(this,u)),nt(r,e))return;y(this,O,r);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!a(this,K).size)return!0;const n=new Set(c??a(this,K));return this.options.throwOnError&&n.add("error"),Object.keys(a(this,O)).some(R=>{const d=R;return a(this,O)[d]!==e[d]&&n.has(d)})};p(this,l,kt).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,l,dt).call(this)}},E=new WeakMap,u=new WeakMap,F=new WeakMap,O=new WeakMap,P=new WeakMap,Q=new WeakMap,N=new WeakMap,U=new WeakMap,V=new WeakMap,B=new WeakMap,j=new WeakMap,L=new WeakMap,x=new WeakMap,M=new WeakMap,K=new WeakMap,l=new WeakSet,Y=function(e){p(this,l,pt).call(this);let r=a(this,u).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(it)),r},ht=function(){p(this,l,mt).call(this);const e=k(this.options.staleTime,a(this,u));if(ot||a(this,O).isStale||!vt(e))return;const s=te(a(this,O).dataUpdatedAt,e)+1;y(this,L,setTimeout(()=>{a(this,O).isStale||this.updateResult()},s))},lt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,u)):this.options.refetchInterval)??!1},ft=function(e){p(this,l,yt).call(this),y(this,M,e),!(ot||_(this.options.enabled,a(this,u))===!1||!vt(a(this,M))||a(this,M)===0)&&y(this,x,setInterval(()=>{(this.options.refetchIntervalInBackground||ee.isFocused())&&p(this,l,Y).call(this)},a(this,M)))},dt=function(){p(this,l,ht).call(this),p(this,l,ft).call(this,p(this,l,lt).call(this))},mt=function(){a(this,L)&&(clearTimeout(a(this,L)),y(this,L,void 0))},yt=function(){a(this,x)&&(clearInterval(a(this,x)),y(this,x,void 0))},pt=function(){const e=a(this,E).getQueryCache().build(a(this,E),this.options);if(e===a(this,u))return;const r=a(this,u);y(this,u,e),y(this,F,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},kt=function(e){Dt.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(a(this,O))}),a(this,E).getQueryCache().notify({query:a(this,u),type:"observerResultsUpdated"})})},xt);function oe(t,e){return _(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Nt(t,e){return oe(t,e)||t.state.data!==void 0&&gt(t,e,e.refetchOnMount)}function gt(t,e,r){if(_(e.enabled,t)!==!1&&k(e.staleTime,t)!=="static"){const s=typeof r=="function"?r(t):r;return s==="always"||s!==!1&&Ct(t,e)}return!1}function Ut(t,e,r,s){return(t!==e||_(s.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Ct(t,r)}function Ct(t,e){return _(e.enabled,t)!==!1&&t.isStaleByTime(k(e.staleTime,t))}function ce(t,e){return!nt(t.getCurrentResult(),e)}var Ft=g.createContext(!1),ue=()=>g.useContext(Ft);Ft.Provider;function he(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var le=g.createContext(he()),fe=()=>g.useContext(le),de=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},me=t=>{g.useEffect(()=>{t.clearReset()},[t])},ye=({result:t,errorResetBoundary:e,throwOnError:r,query:s,suspense:o})=>t.isError&&!e.isReset()&&!t.isFetching&&s&&(o&&t.data===void 0||se(r,[t.error,s])),pe=(t,e)=>e.state.data===void 0,ge=t=>{if(t.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...s)=>e(r(...s)):e(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Re=(t,e)=>t.isLoading&&t.isFetching&&!e,Ce=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Mt=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function Vt(t,e,r){var i,b,m,w,D;const s=ue(),o=fe(),c=$(),n=c.defaultQueryOptions(t);(b=(i=c.getDefaultOptions().queries)==null?void 0:i._experimental_beforeQuery)==null||b.call(i,n),n._optimisticResults=s?"isRestoring":"optimistic",ge(n),de(n,o),me(o);const R=!c.getQueryCache().get(n.queryHash),[d]=g.useState(()=>new e(c,n)),C=d.getOptimisticResult(n),h=!s&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(T=>{const W=h?d.subscribe(Dt.batchCalls(T)):it;return d.updateResult(),W},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g.useEffect(()=>{d.setOptions(n)},[n,d]),Ce(n,C))throw Mt(n,d,o);if(ye({result:C,errorResetBoundary:o,throwOnError:n.throwOnError,query:c.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw C.error;if((w=(m=c.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||w.call(m,n,C),n.experimental_prefetchInRender&&!ot&&Re(C,s)){const T=R?Mt(n,d,o):(D=c.getQueryCache().get(n.queryHash))==null?void 0:D.promise;T==null||T.catch(it).finally(()=>{d.updateResult()})}return n.notifyOnChangeProps?C:d.trackResult(C)}function Se(t,e){return Vt(t,Yt)}function Oe(t,e){return Vt({...t,enabled:!0,suspense:!0,throwOnError:pe,placeholderData:void 0},Yt)}const Ee=async()=>{try{return await z({method:"GET",path:J.ALARM.BASE,withAuth:!0,withCredentials:!0})}catch(t){throw console.error("알림 목록 조회 실패:",t),t}},Te=async()=>{try{return await z({method:"GET",path:J.ALARM.UNREAD_COUNT,withAuth:!0,withCredentials:!0})}catch(t){throw console.error("읽지 않은 알림 개수 조회 실패:",t),t}},Ie=async t=>{try{return await z({method:"PATCH",path:J.ALARM.READ(t),withAuth:!0,withCredentials:!0})}catch(e){throw console.error("알림 읽기 처리 실패:",e),e}},be=async()=>{try{return await z({method:"PATCH",path:J.ALARM.READ_ALL,withAuth:!0,withCredentials:!0})}catch(t){throw console.error("모든 알림 읽기 처리 실패:",t),t}},er=()=>{var s,o;const t=Oe({queryKey:["alarms"],queryFn:Ee,staleTime:3e5}),e=((o=(s=t.data)==null?void 0:s.data)==null?void 0:o.filter(c=>!c.isRead).length)||0,r=e>0;return{...t,unreadCount:e,hasUnreadAlarms:r}},_e=()=>{const e=$().getQueryData(["alarms"]),{data:r,isLoading:s,error:o}=Se({queryKey:["unread-alarm-count"],queryFn:Te,staleTime:1e3*60*2,enabled:!(e!=null&&e.data)});return e!=null&&e.data?{data:{data:e.data.filter(n=>!n.isRead).length},isLoading:!1,error:null}:{data:r,isLoading:s,error:o}},rr=()=>{const t=$();return Kt({mutationFn:e=>Ie(e),onMutate:async e=>{await t.cancelQueries({queryKey:["alarms"]});const r=t.getQueryData(["alarms"]);return t.setQueryData(["alarms"],s=>s!=null&&s.data?{...s,data:s.data.map(o=>o.id===e?{...o,isRead:!0}:o)}:s),{previousAlarms:r}},onError:(e,r,s)=>{s!=null&&s.previousAlarms&&t.setQueryData(["alarms"],s.previousAlarms),ct({title:"알림 처리 실패",description:"알림 읽기 처리에 실패했습니다. 다시 시도해주세요.",variant:"destructive"})},onSettled:()=>{t.invalidateQueries({queryKey:["alarms"]}),t.invalidateQueries({queryKey:["unread-alarm-count"]})}})},sr=()=>{const t=$();return Kt({mutationFn:()=>be(),onMutate:async()=>{await t.cancelQueries({queryKey:["alarms"]});const e=t.getQueryData(["alarms"]);return t.setQueryData(["alarms"],r=>r!=null&&r.data?{...r,data:r.data.map(s=>({...s,isRead:!0}))}:r),{previousAlarms:e}},onSuccess:()=>{ct({title:"모든 알림 읽음 처리 완료",description:"모든 알림이 읽음 처리되었습니다.",variant:"default"})},onError:(e,r,s)=>{s!=null&&s.previousAlarms&&t.setQueryData(["alarms"],s.previousAlarms),ct({title:"알림 처리 실패",description:"모든 알림 읽기 처리에 실패했습니다. 다시 시도해주세요.",variant:"destructive"})},onSettled:()=>{t.invalidateQueries({queryKey:["alarms"]}),t.invalidateQueries({queryKey:["unread-alarm-count"]})}})};function Ae({className:t}){const{data:e}=_e(),r=((e==null?void 0:e.data)||0)>0;return f.jsx(Ht,{to:v.ALARM,className:Qt("relative flex items-center justify-center w-10 h-10 rounded-full hover:bg-gray-100 transition-colors",t),"aria-label":"알림함",children:f.jsx("img",{src:r?ut.NOTIFICATIONS.on:ut.NOTIFICATIONS.off,alt:"알림 아이콘",width:24,height:24,className:"text-primary-dark01"})})}const Wt="lastVisitedPaths",ve={community:{path:"/community?type=teacher&category=top10",category:"teacher",communityCategoryName:"top10"}};function St(){try{const t=sessionStorage.getItem(Wt);if(t){const e=JSON.parse(t);if(e.community){const r=e.community;r.type&&!r.category&&(r.category=r.type,delete r.type),r.type&&r.category&&delete r.type,r.category&&typeof r.category=="string"&&r.category!=="teacher"&&r.category!=="pre-teacher"&&(r.communityCategoryName||(r.communityCategoryName=r.category),r.category="teacher")}return e}}catch(t){console.error("세션 스토리지 접근 오류:",t)}return ve}function we(t){try{const r={...St(),...t};sessionStorage.setItem(Wt,JSON.stringify(r))}catch(e){console.error("세션 스토리지 저장 오류:",e)}}function X(t){return St()[t]||{}}function Ot(t,e){const s=St()[t]||{};we({[t]:{...s,...e}})}function qt(t){const e=X(t);return(e==null?void 0:e.path)||""}function Z(){return X("community")}function Et(t){Ot("community",t)}function ar(){return qt("community")}function nr(){const t=Z().category;return t==="teacher"?"TEACHER":t==="pre-teacher"?"PROSPECTIVE_TEACHER":"TEACHER"}function ir(t){Et({category:t==="TEACHER"?"teacher":"pre-teacher"})}function or(){return Z().communityCategoryName||""}function cr(t){Et({communityCategoryName:t})}function Ne(){return X("review")}function ur(t){Ot("review",t)}function Ue(){return X("school")}function Me(t){Ot("school",t)}function hr(){return qt("school")}function Gt(){const t=Ue(),e=Ne();return t!=null&&t.path&&!t.path.includes("/review")?t.path:e!=null&&e.path?e.path:t!=null&&t.path?t.path:"/school"}function Rt(t){return typeof t!="string"?(console.warn("getPathWithoutParams에 문자열이 아닌 값이 전달되었습니다:",t),""):t.split("?")[0]}function Pe(t){var s;if(typeof t!="string"){console.warn("getUrlKeyFromPath에 문자열이 아닌 값이 전달되었습니다:",t);return}const e=Rt(t);if(!e||e==="/")return"HOME";const r=Object.entries(v).find(([o,c])=>Rt(c)===e);return r?r[0]:(s=Object.entries(v).find(([,o])=>{if(typeof o!="string")return!1;const c=o.replace(/:[^/]+/g,"[^/]+").replace(/\//g,"\\/")+"$";return new RegExp(c).test(e)}))==null?void 0:s[0]}function $t(t){return typeof t!="string"?(console.warn("getPathSegments에 문자열이 아닌 값이 전달되었습니다:",t),[]):t.split("/").filter(e=>e!=="")}function Le(t,e=1){const r=$t(t);return r.length<=e?"/":(r.splice(-e),"/"+r.join("/"))}const zt=["HOME","SCHOOL","COMMUNITY","BOOKMARKS","USER"],xe=["ROOT",...zt],Jt={ROOT:[],HOME:["HOME","SHORTCUTS_EDITOR"],SCHOOL:["SCHOOL","SCHOOL_DETAIL","SEARCH_SCHOOL","REVIEW","REVIEW_WORK","REVIEW_LEARNING","REVIEW_EDITOR"],COMMUNITY:["COMMUNITY","COMMUNITY_TEACHER","COMMUNITY_STUDENT","COMMUNITY_POST","COMMUNITY_POST_EDITOR","SEARCH_COMMUNITY"],BOOKMARKS:["BOOKMARKS"],USER:["USER","USER_PROFILE","USER_ACCOUNT_SETTING","INQUIRY","NOTICE","NOTICE_DETAIL","ALARM","USER_POST"],INQUIRY:["INQUIRY_PUBLIC","INQUIRY_MY","INQUIRY_EDITOR"],USER_PROFILE:["USER_PROFILE_EDITOR"],USER_ACCOUNT_SETTING:["USER_PASSWORD_EDITOR"],COMMUNITY_TEACHER:[],COMMUNITY_STUDENT:[],COMMUNITY_POST:[],COMMUNITY_POST_EDITOR:[],SCHOOL_DETAIL:[],SEARCH_SCHOOL:[],SEARCH_COMMUNITY:[],REVIEW:[],REVIEW_WORK:[],REVIEW_LEARNING:[],REVIEW_EDITOR:[],SIGNIN:[],SIGNUP:[],FIND_PASSWORD:[],INQUIRY_PUBLIC:[],INQUIRY_MY:[],INQUIRY_EDITOR:[],NOTICE:[],NOTICE_DETAIL:[],ALARM:[],USER_PROFILE_EDITOR:[],USER_PASSWORD_EDITOR:[],PERMISSION_TEST:[],REPORT:[],SHORTCUTS_EDITOR:[],TEST:[],USER_POST:[],NAVER_CALLBACK:[],KAKAO_CALLBACK:[],APPLE_CALLBACK:[]},De={SCHOOL:"session_storage",COMMUNITY:"session_storage",REVIEW_EDITOR:"browser_history",COMMUNITY_POST:"browser_history",ALARM:"browser_history",NOTICE:"browser_history",NOTICE_DETAIL:"browser_history",SEARCH_SCHOOL:"browser_history",SEARCH_COMMUNITY:"browser_history",COMMUNITY_POST_EDITOR:"hierarchical",USER_PROFILE_EDITOR:"hierarchical",USER_PASSWORD_EDITOR:"hierarchical",SCHOOL_DETAIL:"hierarchical"},Pt=t=>Pe(t),Xt=t=>zt.find(e=>{var r;return(r=Jt[e])==null?void 0:r.includes(t)}),He=t=>xe.includes(t),lr=(t,e)=>{var r;return e&&((r=Jt[t])==null?void 0:r.includes(e))||!1},Lt=t=>De[t]||"fallback",Qe=t=>He(t),Be=t=>Rt(t).startsWith("/community-post/"),je=t=>{switch(t){case"COMMUNITY":return"community";case"SCHOOL":return"school";default:return"none"}},Ke=(t,e)=>{switch(t){case"community":Et({path:e});break;case"school":Me({path:e});break}},Ye=(t,e)=>{switch(t){case"SCHOOL":{const r=Gt();if(r!=="/school")return e(r),!0;break}case"COMMUNITY":{const r=Z();if(r!=null&&r.path&&r.path!=="/community")return e(r.path),!0;break}}return!1},ke=t=>(t(-1),!0),Fe=(t,e)=>{const r=Xt(t);return r&&r in v?(e(v[r]),!0):!1},Ve=t=>(t("/"),!0),at=(t,e)=>(e(Le(t)),!0);function We(t,e){const r=ae(),s=Bt(),[o,c]=g.useState(!1),n=g.useCallback(()=>Pt(s.pathname),[s.pathname]),R=g.useCallback(h=>{switch(h){case"SCHOOL":return Gt();case"COMMUNITY":{const i=Z(),m=new URLSearchParams(s.search).get("type");if(s.pathname==="/community"&&m){const w=(i==null?void 0:i.communityCategoryName)||"top10";return`${v.COMMUNITY}?type=${m}&category=${w}`}return i!=null&&i.category&&(i!=null&&i.communityCategoryName)?`${v.COMMUNITY}?type=${i.category}&category=${i.communityCategoryName}`:`${v.COMMUNITY}?type=teacher&category=top10`}default:return v[h]||"/"}},[s.pathname,s.search]);g.useEffect(()=>{const h=Pt(s.pathname);if(!h)return Be(s.pathname),void 0;if(h==="COMMUNITY_POST"||h==="SEARCH_SCHOOL"||h==="SEARCH_COMMUNITY")return;const i=Xt(h);if(i){const b=je(i);Ke(b,s.pathname)}},[s.pathname]),g.useEffect(()=>{if(e!==void 0){c(e);return}const h=$t(s.pathname);if(h.length===0){c(!1);return}const i=n();if(i&&Qe(i)){c(!1);return}c(h.length>=1)},[e,s.pathname,n]);const d=g.useCallback((h,i)=>{switch(h){case"session_storage":return Ye(i,r);case"browser_history":return ke(r);case"hierarchical":return Fe(i,r);case"root":return Ve(r);case"fallback":return at(s.pathname,r);default:return!1}},[r,s.pathname]),C=g.useCallback(()=>{if(t&&t())return;const h=n();if(!h){at(s.pathname,r);return}const i=Lt(h);!d(i,h)&&i!=="fallback"&&at(s.pathname,r)},[t,n,d,r,s.pathname]);return{shouldShowBackButton:o,handleBackNavigation:C,getCurrentUrlKey:n,getTabUrl:R,getNavigationStrategy:g.useCallback(()=>{const h=n();return h?Lt(h):"fallback"},[n])}}function qe(t={}){const{hasBackButton:e,onBackButtonClick:r,shouldShowBackButtonCondition:s}=t,{shouldShowBackButton:o,handleBackNavigation:c,getCurrentUrlKey:n}=We(r,e),R=Bt(),[d,C]=g.useState(o);return g.useEffect(()=>{let h=o;if(s){const i=n(),b=s(R.pathname,i);h=h&&b}C(h)},[o,R.pathname,n,s]),{shouldShowBackButton:d,handleBackNavigation:c,getCurrentUrlKey:n}}const Ge=jt("fixed top-0 z-50 gap-3 w-full min-w-80 max-w-3xl bg-white flex h-14 items-center px-5 font-bold text-lg",{variants:{hasBorder:{true:"border-b border-opacity-5",false:""}},defaultVariants:{hasBorder:!0}});function fr({children:t,title:e,titleElement:r,headerLogo:s,hasBorder:o=!0,hasBackButton:c,onBackButtonClick:n,showAlarmButton:R=!1}){const{shouldShowBackButton:d,handleBackNavigation:C}=qe({hasBackButton:c,onBackButtonClick:n});return f.jsxs("header",{className:Qt(Ge({hasBorder:o})),children:[d&&f.jsx("button",{onClick:C,"aria-label":"뒤로 가기",children:f.jsx("img",{src:ut.ARROW.left,alt:"뒤로 가기",className:"h-6 w-6"})}),f.jsxs("div",{className:"flex w-full items-center justify-between",children:[r?f.jsx("div",{className:"min-w-0 flex-1",children:r}):e?f.jsx("h1",{className:"min-w-0 flex-1 truncate pr-2",children:e}):s?f.jsx(Ht,{to:v.HOME,className:"flex-shrink-0",children:f.jsx("img",{src:ne.LOGO.MAIN,alt:"원바원 로고",width:51,height:18})}):null,f.jsxs("div",{className:"flex items-center gap-2",children:[R&&f.jsx(Ae,{}),t]})]})]})}const $e=jt("relative w-full min-w-80 max-w-3xl mx-auto min-h-screen h-full flex flex-col",{variants:{bg:{white:"bg-white",gray:"bg-primary-foreground"}},defaultVariants:{bg:"gray"}});function dr({children:t,bg:e}){return f.jsx("div",{className:$e({bg:e}),style:{minHeight:"100vh"},children:t})}function ze({description:t,ogImage:e,ogUrl:r}){g.useEffect(()=>{let s=document.querySelector('meta[name="description"]');s||(s=document.createElement("meta"),s.setAttribute("name","description"),document.head.appendChild(s)),s.setAttribute("content",t);const o=document.querySelector('meta[property="og:description"]');o&&o.setAttribute("content",t);const c=document.querySelector('meta[name="twitter:description"]');if(c&&c.setAttribute("content",t),e){const n=document.querySelector('meta[property="og:image"]');n&&n.setAttribute("content",e);const R=document.querySelector('meta[name="twitter:image"]');R&&R.setAttribute("content",e)}if(r){const n=document.querySelector('meta[property="og:url"]');n&&n.setAttribute("content",r)}return()=>{}},[t,e,r])}function mr({title:t,description:e,ogImage:r,ogUrl:s}){return ze({description:e,ogImage:r,ogUrl:s}),f.jsxs(ie,{children:[f.jsx("title",{children:t}),f.jsx("meta",{name:"description",content:e}),r&&f.jsxs(f.Fragment,{children:[f.jsx("meta",{property:"og:image",content:r}),f.jsx("meta",{name:"twitter:image",content:r})]}),s&&f.jsx("meta",{property:"og:url",content:s}),t&&f.jsxs(f.Fragment,{children:[f.jsx("meta",{property:"og:title",content:t}),f.jsx("meta",{name:"twitter:title",content:t})]}),f.jsx("meta",{property:"og:description",content:e}),f.jsx("meta",{name:"twitter:description",content:e})]})}export{fr as H,mr as M,Yt as Q,dr as W,We as a,Oe as b,ar as c,Et as d,nr as e,or as f,hr as g,ir as h,cr as i,Vt as j,pe as k,Pt as l,Rt as m,Be as n,lr as o,rr as p,er as q,sr as r,ur as s,Se as u};
