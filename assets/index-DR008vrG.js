import{r as f,j as e,Z as K,o as H,B as A,S as i,a as N,L as E,U as S,C as w,D as O}from"./index-C8JFuZlv.js";import{H as y,u as M,a as L,l as U,m as _,n as F,o as k,W as V,M as $}from"./useMetadata-D7nd75QV.js";const I=A("inline-flex h-fit items-center justify-center gap-2 whitespace-nowrap transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary-foreground text-primary-normal03 hover:opacity-80",primary:"bg-primary text-white disabled:opacity-50 hover:opacity-80",secondary:"bg-secondary-main text-primary disabled:bg-primary-normal01 disabled:opacity-40",tertiary:"bg-transparent border border-blue-100 text-blue-300 disabled:text-primary-normal03 hover:opacity-80 active:border-blue-400 active:text-blue-400",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",transparent:"bg-transparent hover:bg-accent hover:text-accent-foreground",transparent_gray:"text-primary-normal03 hover:bg-muted",link:"text-primary underline-offset-4 hover:underline"},border:{gray:"border border-primary-normal01",blue:"border border-tertiary-2",black:"border border-primary",none:"border-none"},shadow:{sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},size:{xs:"px-1 py-0.5",sm:"px-2.5 py-0.5",md:"p-2.5",lg:"px-3.5 py-2.5"},font:{xs_sb:"text-xs font-semibold",xs:"text-xs",sm_sb:"text-sm font-semibold",sm:"text-sm",md_sb:"text-md font-semibold",md:"text-md",lg_sb:"text-lg font-semibold",lg:"text-lg"},shape:{default:"rounded-lg",rounded:"rounded-xl",full:"rounded-full"}},defaultVariants:{variant:"default",size:"md",shape:"default",border:"none",font:"md_sb"}}),R=f.forwardRef(function({className:r,variant:t,font:s,size:n,shape:o,border:l,shadow:h,asChild:u=!1,...d},m){const b=u?K:"button";return e.jsx(b,{className:H(I({variant:t,font:s,size:n,shape:o,border:l,shadow:h,className:r})),ref:m,...d})});R.displayName="Button";function W({title:a,hasBorder:r,hasBackButton:t,onBackButtonClick:s}){const n=()=>{};return e.jsx(y,{title:a,hasBorder:r,hasBackButton:t,onBackButtonClick:s,children:e.jsx("button",{onClick:n,"aria-label":"북마크",children:e.jsx("img",{src:i.BOOKMARKER.inactive,alt:"북마크",width:24,height:24})})})}function z({title:a,headerLogo:r,hasBackButton:t=!1,onBackButtonClick:s,hasWriteButton:n=!1,category:o="TEACHER",hasBorder:l=!0}){const h=N(),u=()=>{const d=`${S.SEARCH_COMMUNITY}?category=${o}`;h(d)};return e.jsx(y,{title:a,headerLogo:r,hasBackButton:t,onBackButtonClick:s,hasBorder:l,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:u,"aria-label":"검색",children:e.jsx("img",{src:i.SEARCH,alt:"검색",width:24,height:24})}),n&&e.jsx(E,{to:"/community/write",className:"flex h-6 w-6 items-center justify-center rounded-full bg-primary-normal01","aria-label":"글쓰기",children:e.jsx("img",{src:i.POST.create,alt:"연필 아이콘",height:12,width:12})})]})})}function G({title:a,hasBorder:r,hasBackButton:t,onBackButtonClick:s,onSave:n}){return e.jsx(y,{title:a,hasBorder:r,hasBackButton:t,onBackButtonClick:s,children:e.jsx(R,{type:"button",variant:"tertiary",border:"blue",size:"sm",font:"sm","aria-label":"저장",onClick:n,children:"저장하기"})})}const Y=async a=>{const r=new URLSearchParams({kindergartenId:a.toString()}).toString();return w({method:"GET",path:`${O.FAVORITE.STATUS}?${r}`,withAuth:!0})},q=async a=>w({method:"POST",path:O.FAVORITE.BASE,data:{kindergartenId:a},withAuth:!0}),D=async()=>w({method:"GET",path:O.FAVORITE.BASE,withAuth:!0}),Q=()=>{const{data:a,isLoading:r,isError:t,error:s,refetch:n}=M({queryKey:["favorites"],queryFn:D,staleTime:6e4,gcTime:6e5,refetchOnWindowFocus:!0,refetchOnMount:!0});return{favorites:(a==null?void 0:a.data)||[],isLoading:r,isError:t,error:s,refetch:n}};function Z({title:a,headerLogo:r,hasBorder:t,hasBackButton:s,onBackButtonClick:n,kindergartenId:o,showBookmark:l=!1}){const h=N(),[u,d]=f.useState(!1),[m,b]=f.useState(!1),{refetch:g}=Q();f.useEffect(()=>{l&&o&&p()},[l,o]);const p=async()=>{if(o)try{const c=await Y(Number(o));d(c.data)}catch(c){console.error("즐겨찾기 상태 확인 실패:",c)}},v=f.useCallback(async()=>{if(!(!o||m))try{b(!0);const c=await q(Number(o));c.success&&(d(c.data.favorite),g())}catch(c){console.error("즐겨찾기 토글 실패:",c)}finally{b(!1)}},[o,m,g]),j=()=>{h(S.SEARCH_SCHOOL)};return e.jsx(y,{title:a,headerLogo:r,hasBorder:t,hasBackButton:s,onBackButtonClick:n,children:e.jsxs("div",{className:"flex items-center gap-4",children:[l&&e.jsx("button",{onClick:v,"aria-label":u?"즐겨찾기 취소":"즐겨찾기 추가",disabled:m,className:m?"opacity-50":"",children:e.jsx("img",{src:u?i.BOOKMARKER.active:i.BOOKMARKER.inactive,alt:"북마크",width:24,height:24})}),e.jsx("button",{onClick:j,"aria-label":"검색",children:e.jsx("img",{src:i.SEARCH,alt:"검색",width:24,height:24})})]})})}const J=A("h-full",{variants:{bg:{white:"bg-white",gray:"bg-primary-foreground"}},defaultVariants:{bg:"gray"}});function X({children:a,bg:r,className:t}){return e.jsx("main",{className:`${J({bg:r})} ${t}`,children:a})}const ee=[{label:"홈",urlKey:"HOME",ariaLabel:"홈 페이지로 이동",dataButtonName:"홈",iconPaths:i.HOME},{label:"유치원",urlKey:"SCHOOL",ariaLabel:"기관 찾기 페이지로 이동",dataButtonName:"유치원",iconPaths:i.SCHOOL},{label:"커뮤니티",urlKey:"COMMUNITY",ariaLabel:"커뮤니티 페이지로 이동",dataButtonName:"커뮤니티",iconPaths:i.COMMUNITY},{label:"즐겨찾기",urlKey:"BOOKMARKS",ariaLabel:"즐겨찾기 페이지로 이동",dataButtonName:"즐겨찾기",iconPaths:i.BOOKMARKS},{label:"프로필",urlKey:"USER",ariaLabel:"유저 페이지로 이동",dataButtonName:"프로필",iconPaths:i.USER}],te=(a,r)=>{const t=U(r),s=_(r);return a==="ROOT"?s==="/":a==="COMMUNITY"&&F(r)?!0:k(a,t)};function ae({currentPath:a}){const{getTabUrl:r}=L();return e.jsx("nav",{className:"fixed bottom-0 mx-auto flex h-14 w-full min-w-80 max-w-3xl items-center justify-between border-t border-opacity-5 bg-white px-8 py-3 text-xs font-bold",role:"navigation","aria-label":"글로벌 네비게이션",children:ee.map(t=>{if(!(t.urlKey in S))return console.warn(`🚨 Invalid URL key: ${t.urlKey}`),null;const s=te(t.urlKey,a),n=r(t.urlKey);return e.jsxs(E,{to:n,"aria-label":t.ariaLabel,"data-button-name":t.dataButtonName,"data-section-name":"gnb",className:`flex flex-col items-center text-xxs transition-colors duration-200 ${s?"text-primary":"text-primary-normal03 hover:text-primary-normal02"}`,children:[e.jsx("img",{src:s?t.iconPaths.active:t.iconPaths.inactive,alt:`${t.label} 아이콘`,width:"24",height:"24",className:"mb-1"}),e.jsx("span",{className:"text-center leading-tight",children:t.label})]},t.label)})})}function ne({children:a,title:r,description:t="유치원 교사들을 위한 유치원 리뷰 및 커뮤니티 서비스",ogImage:s,ogUrl:n,headerTitle:o,headerLogo:l,headerType:h="base",headerHasBorder:u,hasBackButton:d,onBackButtonClick:m,currentPath:b,wrapperBg:g="gray",mainBg:p="white",mainClassName:v="flex flex-col gap-6 pb-5 mt-14 mb-24",isGlobalNavBar:j=!0,kindergartenId:c,showBookmark:C,onSave:P,showAlarmButton:T=!1}){const B=()=>{if(!o&&!l)return null;const x={title:o,headerLogo:l,hasBorder:u,hasBackButton:d,onBackButtonClick:m,showAlarmButton:T};switch(h){case"community":return e.jsx(z,{...x});case"school":return e.jsx(Z,{...x,kindergartenId:c,showBookmark:C});case"save":return e.jsx(G,{...x,onSave:P});case"bookmark":return e.jsx(W,{...x});default:return e.jsx(y,{...x})}};return e.jsxs(V,{bg:g,children:[e.jsx($,{title:r,description:t,ogImage:s,ogUrl:n}),B(),e.jsx(X,{bg:p,className:v,children:a}),j&&e.jsx(ae,{currentPath:b})]})}export{R as B,ne as P,Q as u};
