import{j as e,S as c,r as l,U as u,I as d,L as g,s as k}from"./index-C8JFuZlv.js";import{B as h,P as p}from"./index-DR008vrG.js";import{g as f}from"./useSocialAuth-Df0j2BD2.js";import{s as j,M as N}from"./webViewCommunication-_xI12zLs.js";import"./useMetadata-D7nd75QV.js";import"./useMutation-B4GGscfX.js";function x({type:a}){const t={kakao:{icon:c.OAUTH.kakao,className:"bg-[#FAE300] text-black",label:"KaKao"},naver:{icon:c.OAUTH.naver,className:"bg-[#20C803] text-white",label:"Naver"},apple:{icon:c.OAUTH.apple,className:"bg-black text-white",label:"Apple"}}[a],r=()=>{try{if(a==="naver"){const o=Math.random().toString(36).substring(2,15),n=f.naver(o);window.location.href=n}else if(a==="kakao"){const o=f.kakao();window.location.href=o}else if(a==="apple"){const o=f.apple();window.location.href=o}}catch(o){console.error(`${a} 로그인 URL 생성 실패:`,o)}};return e.jsxs(h,{font:"md",className:`relative ${t.className}`,onClick:r,children:[e.jsx("img",{src:t.icon,width:"24",height:"24",className:"absolute left-4",alt:`${t.label} 로고`}),t.label,"로 시작하기"]})}const T=/OneByOne/i.test(navigator.userAgent);function b(){const[a,i]=l.useState(null),[t,r]=l.useState(!1),[o,n]=l.useState(null);return[l.useCallback(async()=>{r(!0),n(null);try{const s=await j(N.REQUEST_FCM_TOKEN,{});if((s==null?void 0:s.status)==="success"&&s.token)return i(s.token),s.token;{const m=(s==null?void 0:s.message)||"FCM 토큰을 가져오는데 실패했습니다.";return n(m),null}}catch(s){const m=s instanceof Error?s.message:"알 수 없는 오류";return console.error("FCM 토큰 요청 오류:",s),n(m),null}finally{r(!1)}},[]),a,t,o]}function M(){const[a]=b();return l.useEffect(()=>{T&&(async()=>{const t=await a();t&&(k("fcmToken",t),console.log("FCM 토큰 저장  >> ",t))})()},[]),e.jsxs(p,{currentPath:u.ROOT,isGlobalNavBar:!1,mainClassName:"my-auto flex flex-col gap-[10vh]",wrapperBg:"white",children:[e.jsxs("section",{className:"mx-auto flex flex-col justify-center gap-4 pt-[10vh] text-center",children:[e.jsxs("h1",{children:[e.jsx("strong",{children:"선생님"}),"들의 ",e.jsx("strong",{children:"진짜 유치원 이야기"})]}),e.jsx("img",{src:d.LOGO.MAIN,alt:"원바원 로고",width:89,height:31,className:"mx-auto"})]}),e.jsxs("section",{className:"mx-auto flex w-3/4 flex-col justify-center gap-9",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(x,{type:"kakao"}),e.jsx(x,{type:"naver"}),e.jsx(x,{type:"apple"}),e.jsx(g,{to:u.SIGNIN,children:e.jsxs(h,{font:"md",className:"relative w-full text-black",children:[e.jsx("img",{src:c.EMAIL,width:"24",height:"24",className:"absolute left-4"}),"Email로 시작하기"]})})]}),e.jsxs("div",{className:"flex justify-center gap-2 text-xs",children:[e.jsx("p",{className:"text-primary-dark01",children:"아직 회원이 아니신가요?"}),e.jsx(g,{to:u.SIGNUP,className:"font-semibold text-tertiary-3 underline",children:"회원가입"})]})]})]})}export{M as default};
