import{j as e,r as g,a as W,t as M,y as V}from"./index-C8JFuZlv.js";import{B as S,P as O}from"./index-DR008vrG.js";import{s as N}from"./types-CfV6Q2Fg.js";import{a as t,b as o,c as l,d as i,e as c,u as F,F as z}from"./index-D7zi7Ntn.js";import{A as R}from"./index-C7UfpOvL.js";import{I as L}from"./index-DFQufHV3.js";import{T as j}from"./index-CIl45rHz.js";import{B as u,b as Y,c as I}from"./useReview-BA00Z3nI.js";import{T as f}from"./index-bz4f2k9Y.js";import{R as p,a as E}from"./review-IuptfKQ8.js";import{w as K,l as _}from"./validationSchemas-CFCrOTP5.js";import"./useMetadata-D7nd75QV.js";import"./useMutation-B4GGscfX.js";function G({value:r,max:a}){const d=r/a*100,s=Array.from({length:a},(h,n)=>n+1);return e.jsx("div",{className:"w-full px-2",children:e.jsxs("div",{className:"relative h-2.5",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-full rounded-full bg-primary-foreground"}),e.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full bg-tertiary-2 transition-all duration-300",style:{width:`${d}%`}}),e.jsx("div",{className:"absolute left-0 top-0 flex h-full w-full items-center pr-3",children:e.jsx("div",{className:"relative h-full w-full",children:s.map(h=>{const n=a===1?50:(h-1)/(a-1)*100;return e.jsx("div",{className:"absolute top-1/2 h-1 w-1 rounded-full bg-tertiary-2",style:{left:`${n}%`,transform:"translateY(-50%) translateX(-50%)"}},h)})})})]})})}function X({form:r,step:a}){const d=g.useMemo(()=>e.jsx(e.Fragment,{children:e.jsx(t,{control:r.control,name:"oneLineComment",render:({field:n})=>e.jsxs(o,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"한 줄 평가를 작성해주세요"}),e.jsx("span",{className:"text-xs font-semibold text-primary-normal02",children:"*200자 이내"})]}),e.jsx(i,{children:e.jsx(L,{font:"md",placeholder:"내용을 입력해주세요",...n})}),e.jsx(c,{})]})})}),[r]),s=g.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"workEnvironmentComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"분위기에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",...n})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"workEnvironmentScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"분위기 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"learningSupportComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"학습 도움에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",...n})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"learningSupportScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"학습 도움 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"instructionTeacherComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"지도 교사에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",...n})}),e.jsx(c,{})]})}),e.jsx(t,{control:r.control,name:"instructionTeacherScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"지도 교사 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})})]}),e.jsxs(R,{children:[e.jsx("strong",{children:"익명성 보장을 위한 안내"})," ",e.jsx("br",{})," 확실한 익명 보장을 위해 리뷰가 등록되면 리뷰에 익명 닉네임, 프로필 등 작성자에 대한 정보가 표기되지 않습니다."]})]}),[r]);return g.useMemo(()=>a===2?s:d,[a,d,s])}function q({form:r,step:a}){const d=g.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsx(t,{control:r.control,name:"oneLineComment",render:({field:n})=>e.jsxs(o,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"한 줄 평가를 작성해주세요"}),e.jsx("span",{className:"text-xs font-semibold text-primary-normal02",children:"*200자 이내"})]}),e.jsx(i,{children:e.jsx(L,{font:"md",placeholder:"내용을 입력해주세요",value:n.value,onChange:n.onChange,name:"oneLineComment"})}),e.jsx(c,{})]})},"oneLineComment"),e.jsx(t,{control:r.control,name:"workYear",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"근무 기간을 체크해주세요"}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:1,pressed:n.value===1,onPressedChange:()=>n.onChange(1),children:"2년 이내 근무"}),e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:2,pressed:n.value===2,onPressedChange:()=>n.onChange(2),children:"2-5년 전 근무"}),e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:3,pressed:n.value===3,onPressedChange:()=>n.onChange(3),children:"근무한지 오래됨"})]})}),e.jsx(c,{})]})},"workYear"),e.jsx(t,{control:r.control,name:"workType",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"근무 유형을 입력해주세요"}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:"담임",pressed:n.value==="담임",onPressedChange:()=>n.onChange("담임"),children:"담임"}),e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:"부담임",pressed:n.value==="부담임",onPressedChange:()=>n.onChange("부담임"),children:"부담임"}),e.jsx(f,{variant:"primary",font:"md",size:"lg",shape:"full",value:"비공개",pressed:n.value==="비공개",onPressedChange:()=>n.onChange("비공개"),children:"비공개"})]})}),e.jsx(c,{})]})},"workType")]}),[r]),s=g.useMemo(()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"benefitAndSalaryComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"복지/급여에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",value:n.value||"",onChange:n.onChange,name:"benefitAndSalaryComment"})}),e.jsx(c,{})]})},"benefitAndSalaryComment"),e.jsx(t,{control:r.control,name:"benefitAndSalaryScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"복지/급여 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})},"benefitAndSalaryScore")]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"workLifeBalanceComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"워라벨에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",value:n.value||"",onChange:n.onChange,name:"workLifeBalanceComment"})}),e.jsx(c,{})]})},"workLifeBalanceComment"),e.jsx(t,{control:r.control,name:"workLifeBalanceScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"워라벨 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})},"workLifeBalanceScore")]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"workEnvironmentComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"분위기에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",value:n.value||"",onChange:n.onChange,name:"workEnvironmentComment"})}),e.jsx(c,{})]})},"workEnvironmentComment"),e.jsx(t,{control:r.control,name:"workEnvironmentScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"분위기 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})},"workEnvironmentScore")]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"managerComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"관리자에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",value:n.value||"",onChange:n.onChange,name:"managerComment"})}),e.jsx(c,{})]})},"managerComment"),e.jsx(t,{control:r.control,name:"managerScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"관리자 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})},"managerScore")]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(t,{control:r.control,name:"customerComment",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"고객에 대해서 알려주세요"}),e.jsx(i,{children:e.jsx(j,{padding:"sm",font:"md",size:"auto",placeholder:"점수만 입력하고 내용은 생략 가능해요",value:n.value||"",onChange:n.onChange,name:"customerComment"})}),e.jsx(c,{})]})},"customerComment"),e.jsx(t,{control:r.control,name:"customerScore",render:({field:n})=>e.jsxs(o,{children:[e.jsx(l,{className:"text-base font-semibold text-primary-dark01",children:"고객 점수"}),e.jsx(i,{children:e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{value:n.value,onChange:m=>n.onChange(m),size:"md"})})}),e.jsx(c,{})]})},"customerScore")]}),e.jsxs(R,{children:[e.jsx("strong",{children:"익명성 보장을 위한 안내"})," ",e.jsx("br",{})," 확실한 익명 보장을 위해 리뷰가 등록되면 리뷰에 익명 닉네임, 프로필 등 작성자에 대한 정보가 표기되지 않습니다."]})]}),[r]);return g.useMemo(()=>a===2?s:d,[a,d,s])}function D({schoolId:r,type:a,onSubmitSuccess:d}){const[s,h]=g.useState(1),n=W(),m=Y(),k=I(),v=F({resolver:N(K),defaultValues:{workYear:1,workType:"비공개",oneLineComment:"",benefitAndSalaryComment:"",benefitAndSalaryScore:0,workLifeBalanceComment:"",workLifeBalanceScore:0,workEnvironmentComment:"",workEnvironmentScore:0,managerComment:"",managerScore:0,customerComment:"",customerScore:0}}),C=F({resolver:N(_),defaultValues:{oneLineComment:"",workEnvironmentComment:"",workEnvironmentScore:0,learningSupportComment:"",learningSupportScore:0,instructionTeacherComment:"",instructionTeacherScore:0}});if(!Object.values(p).includes(a))return n(`/school/${r}/review?type=work`),null;const b=(a===p.WORK,2),T=async()=>{let x=!1;if(a===p.WORK){const y=s===1?["workYear","workType","oneLineComment"]:["benefitAndSalaryScore","workLifeBalanceScore","workEnvironmentScore","managerScore","customerScore"];x=await v.trigger(y)}else{const y=s===1?["oneLineComment"]:["workEnvironmentScore","learningSupportScore","instructionTeacherScore"];x=await C.trigger(y)}x&&(s<b?h(w=>w+1):B())},P=()=>{s>1?h(x=>x-1):n(`/school/${r}/review?type=${a}`)},B=async()=>{try{if(a===p.WORK){const x=v.getValues();await m.mutateAsync({...x,kindergartenId:Number(r)})}else{const x=C.getValues();await k.mutateAsync({...x,kindergartenId:Number(r),workType:"실습생"})}d?d():n(`/school/${r}/review?type=${a}`)}catch(x){console.error("Submit error:",x)}},$=()=>{const x=a===p.WORK?m.isPending:k.isPending;return e.jsxs("div",{className:s>1?"mt-6 flex justify-between":"ml-auto mt-6 flex",children:[s>1&&e.jsx(S,{size:"lg",onClick:P,disabled:x,children:"이전"}),e.jsx(S,{variant:s===b?"secondary":"primary",size:"lg",onClick:T,disabled:x,children:s===b?"등록":"다음"})]})};return e.jsxs("div",{className:"flex flex-col gap-6 rounded-lg bg-white p-5",children:[e.jsx(G,{value:s,max:b}),a===p.WORK?e.jsx(z,{...v,children:e.jsx("form",{className:"flex flex-col gap-10",children:e.jsx(q,{form:v,step:s,schoolId:r},`work-review-step-${s}`)})}):e.jsx(z,{...C,children:e.jsx("form",{className:"flex flex-col gap-10",children:e.jsx(X,{form:C,step:s},`learning-review-step-${s}`)})}),$()]})}function ie(){const{id:r}=M(),[a]=V(),d=a.get("type")||p.WORK,s=r||"unknown";return e.jsx(O,{title:`원바원 | ${s} ${E[d]} 작성`,headerTitle:" ",headerType:"school",description:`${s} ${E[d]} 작성 페이지`,currentPath:`/school/${s}/review/new?type=${d}`,mainBg:"gray",children:e.jsx(D,{schoolId:s,type:d})})}export{ie as default};
