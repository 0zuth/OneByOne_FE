import{C as u,D as y,y as E,r as h,j as e,b as R,U as m,L as f}from"./index-C8JFuZlv.js";import{P as S}from"./index-DR008vrG.js";import{F as w}from"./index.esm-CCktejdI.js";import{E as I}from"./index-Bz5g5oRx.js";import{E as T}from"./index-BJS9H4xq.js";import{N}from"./index-WMVJUL97.js";import{R as _,g as j,a as L}from"./reviewUtils-h8QJmf0I.js";import{R as c}from"./review-IuptfKQ8.js";import{I as O}from"./infiniteQueryObserver-CmTYH24f.js";import{j as v}from"./useMetadata-D7nd75QV.js";import{D as A}from"./query-config-BQJB0S96.js";import"./dateUtils-Br-z8UuZ.js";import"./useMutation-B4GGscfX.js";function C(t,a){return v(t,O)}const W=async t=>{const a=new URLSearchParams({page:t.page.toString(),size:t.size.toString()});try{return await u({method:"GET",path:`${y.USER.MY_WORK_REVIEW}?${a.toString()}`,withAuth:!0,withCredentials:!0})}catch(r){throw console.error("내가 작성한 근무 리뷰 조회 실패:",r),r}},b=async t=>{const a=new URLSearchParams({page:t.page.toString(),size:t.size.toString()});try{return await u({method:"GET",path:`${y.USER.MY_INTERNSHIP_REVIEW}?${a.toString()}`,withAuth:!0,withCredentials:!0})}catch(r){throw console.error("내가 작성한 실습 리뷰 조회 실패:",r),r}},M=10,U=t=>{const[a]=E(),r=a.get("type")||c.WORK,s=r===c.WORK?W:b;return C({queryKey:["myPosts",r,t],queryFn:({pageParam:n=0})=>s({page:n,size:M,...t}),getNextPageParam:(n,l)=>{const o=l.length;return o<n.totalPages?o:void 0},initialPageParam:0,...A})},$=110,k=690;function F({data:t,index:a,style:r}){const s=t[a],i="workReviewId"in s?c.WORK:c.LEARNING,n=`${m.REVIEW.replace(":id",s.kindergartenId.toString())}?type=${i}`;return e.jsx(f,{to:n,style:r,className:"",children:e.jsx(_,{rating:L(s,i),title:s.oneLineComment,workType:s.workType,createdAt:s.createdAt||"",workYear:j(s,i),className:"mx-5 border-b border-primary-light02 py-4 hover:opacity-70"})})}function G(){const[t]=E(),a=t.get("type")||c.WORK,{data:r,fetchNextPage:s,hasNextPage:i,isFetchingNextPage:n,isLoading:l,error:o}=U(),P=h.useRef(null),p=(r==null?void 0:r.pages.flatMap(g=>g.content))||[],x=h.useCallback(()=>{i&&!n&&s()},[i,n,s]),d=[{href:`${m.USER_POST}?type=${c.WORK}`,label:"근무리뷰"},{href:`${m.USER_POST}?type=${c.LEARNING}`,label:"실습리뷰"}];return l?e.jsx(R,{}):o?e.jsxs(T,{type:"page",children:[e.jsx("p",{className:"text-sm",children:"리뷰 불러오기 오류"}),e.jsx("span",{className:"text-xxs text-primary-normal02",children:o==null?void 0:o.message})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{options:d,currentPath:`${m.USER_POST}?type=${a}`,className:"flex gap-5 bg-white px-5 py-3 text-lg font-semibold"}),p.length>0?e.jsx(e.Fragment,{children:e.jsx(w,{ref:P,height:k,width:"100%",itemCount:p.length,itemSize:$,itemData:p,onItemsRendered:({visibleStopIndex:g})=>{g===p.length-1&&x()},children:F})}):e.jsx(I,{type:"page",title:"작성된 리뷰가 없습니다.",subTitle:"유치원 상세 페이지에서 리뷰를 작성해보세요."})]})}function te(){return e.jsx(S,{title:"원바원 | 작성한 리뷰 관리",description:"작성한 리뷰 관리",headerTitle:"작성한 리뷰 관리",currentPath:m.USER_POST,wrapperBg:"white",mainClassName:"mt-14",children:e.jsx(h.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(G,{})})})}export{te as default};
